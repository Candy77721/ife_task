{"version":3,"sources":["FormItem/baseItem.js","FormChecker/index.js","FormItem/InputItem.js","FormItem/index.js","FormBuilder/index.js"],"names":["BaseItem","config","checkQueue","state","container","buildDOM","Error","errorTips","querySelector","innerHTML","FormChecker","input","default","RANGE","tips","params","min","placeholder","max","rule","length","fail","MAX","nput","number","DEFAULT","test","Number","InputItem","document","createElement","title","subtitle","setAttribute","_addCheck","_bindEventListener","defaultCheck","checkType","push","validates","forEach","validate","checker","value","every","check","isPassCheck","_updateState","$input","addEventListener","e","invokeCheck","FormItem","item","element","TextareaItem","RadioItem","CheckboxItem","SelectItem","DateItem","FormBuilder","el","_el","_title","_subtitle","_items","items","_formItems","_buildAll","_showAll","console","log","append","window"],"mappings":"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","file":"FormBuilder.3ab5f663.map","sourceRoot":"..","sourcesContent":["export default class BaseItem {\r\n    constructor(config) {\r\n        this.config = config;\r\n        this.checkQueue = [];\r\n        this.state = 'correct';\r\n        this.container = null;\r\n        this.buildDOM()\r\n    }\r\n    buildDOM() {\r\n        throw new Error('Override base class methods buildDOM');\r\n    }\r\n    invokeCheck() {\r\n        throw new Error('Override base class methods invokeCheck');\r\n    }\r\n    _updateState(state, { errorTips }) {\r\n        this.state = state;\r\n        if(state === 'correct') {\r\n            this.container.querySelector('.tips').innerHTML = '';\r\n        } else {\r\n            this.container.querySelector('.tips').innerHTML = errorTips;\r\n        }\r\n    }\r\n}","const FormChecker = {\r\n    input: {\r\n        default: {\r\n            RANGE: {\r\n                tips: '字符个数在两者之间',\r\n                params: {\r\n                    min: {\r\n                        placeholder: '最小值',\r\n                    },\r\n                    max: {\r\n                        placeholder: '最大值',\r\n                    }\r\n                },\r\n                rule: function ({ min, max }, input) {\r\n                    return (input.length >= min && input.length <= max);\r\n                },\r\n                fail: function ({ min, max }) {\r\n                    return `请输${min}-${max}个字。`\r\n                }\r\n            },\r\n            MAX: {\r\n                tips: '字符个数不超过',\r\n                params: {\r\n                    max: {\r\n                        placeholder: '最大值',\r\n                    }\r\n                },\r\n                rule: function ({ max }, input) {\r\n                    return (nput.length <= max)\r\n                },\r\n                fail: function ({ max }) {\r\n                    return `请输不超过${max}个字。`\r\n                }\r\n            }\r\n        },\r\n        number: {\r\n            DEFAULT: {\r\n                rule: function (params, input) {\r\n                    return /^[0-9]*$/.test(input);\r\n                },\r\n                fail: function () {\r\n                    return '请输入数字。';\r\n                }\r\n            },\r\n            RANGE: {\r\n                tips: '数字值在两者之间',\r\n                params: {\r\n                    min: {\r\n                        placeholder: '最小值',\r\n                    },\r\n                    max: {\r\n                        placeholder: '最大值',\r\n                    }\r\n                },\r\n                rule: function ({ min, max }, input) {\r\n                    return (Number(input) >= min && Number(input) <= max);\r\n                },\r\n                fail: function ({ min, max }) {\r\n                    return `请输${min}-${max}区间的数字。`\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default FormChecker","import BaseItem from './baseItem';\r\nimport FormChecker from '../FormChecker';\r\n\r\nexport default class InputItem extends BaseItem {\r\n    constructor(config) {\r\n        super(config);\r\n    }\r\n    buildDOM() {\r\n        const container = document.createElement('div');\r\n        const innerHTML = `\r\n            <p class=\"title\">${this.config.title}<p>\r\n            <p class=\"subtitle\">${this.config.subtitle}<p>\r\n            <div class=\"container\">\r\n                <input  placeholder=\"${this.config.placeholder}\"/>\r\n                <p class=\"tips\"></p>\r\n            </div>\r\n        `\r\n        container.innerHTML = innerHTML;\r\n        container.setAttribute('class', 'form-item');\r\n\r\n        this.container = container;\r\n        this._addCheck();\r\n        this._bindEventListener();\r\n    }\r\n    _addCheck() {\r\n        const defaultCheck = FormChecker.input[this.config.checkType].DEFAULT;\r\n        if(defaultCheck) {\r\n            this.checkQueue.push({\r\n                params: {},\r\n                rule: defaultCheck.rule,\r\n                fail: defaultCheck.fail,\r\n            });\r\n        }\r\n\r\n        (this.config.validates || []).forEach(validate => {\r\n            const checker = FormChecker.input[this.config.checkType][validate.rule];\r\n            this.checkQueue.push({\r\n                params: validate.params,\r\n                rule: checker.rule,\r\n                fail: checker.fail,\r\n            });\r\n        });\r\n    }\r\n    invokeCheck() {\r\n        const value = this.container.querySelector('input').value;\r\n        let errorTips;\r\n        this.checkQueue.every(check => {\r\n            const isPassCheck = check.rule(check.params, value);\r\n            if(!isPassCheck) errorTips = check.fail(check.params);\r\n            return isPassCheck;\r\n        });\r\n        if(errorTips) {\r\n            this._updateState('incorrect', { errorTips });\r\n            return 'incorrect';\r\n        } else {\r\n            this._updateState('correct', { errorTips: '' });\r\n            return 'correct';\r\n        }\r\n    }\r\n    \r\n    _bindEventListener() {\r\n        const $input = this.container.querySelector('input');\r\n        $input.addEventListener('input', e => {\r\n            this.invokeCheck();\r\n        })\r\n    }\r\n}","import InputItem from './InputItem';\r\nimport TextareaItem from './TextareaItem';\r\nimport RadioItem from './RadioItem';\r\nimport CheckboxItem from './CheckboxItem';\r\nimport SelectItem from './SelectItem';\r\nimport DateItem from './DateItem';\r\n\r\nexport default class FormItem {\r\n    constructor(item) {\r\n        switch(item.element) {\r\n            case 'input':    return new InputItem(item);\r\n            case 'textarea': return new TextareaItem(item);\r\n            case 'radio':    return new RadioItem(item);\r\n            case 'checkbox': return new CheckboxItem(item);\r\n            case 'select':   return new SelectItem(item);\r\n            case 'date':     return new DateItem(item);\r\n        }\r\n    }\r\n}","import FormItem from '../FormItem'\r\n\r\nclass FormBuilder {\r\n    constructor ({ config, el }){\r\n        this._el = el;\r\n        this._title = config.title;\r\n        this._subtitle = config.subtitle;\r\n        this._items = config.items;\r\n        this._formItems = [];\r\n        this._buildAll();\r\n    }\r\n    _buildAll() {\r\n        this._items.forEach(item => {\r\n            this._formItems.push(new FormItem(item));\r\n        });\r\n        this._showAll();\r\n    }\r\n    _showAll() {\r\n        this._formItems.forEach(item => {\r\n            console.log(item);\r\n            \r\n            this._el.append(item.container);\r\n        })\r\n    }\r\n}\r\n\r\nwindow.FormBuilder = FormBuilder;\r\n\r\n"]}